"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[696],{6906:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>C,contentTitle:()=>w,default:()=>L,frontMatter:()=>S,metadata:()=>A,toc:()=>N});var t=a(8168),l=a(8587),r=a(6540),i=a(5680),s=a(6652),o=a(1612),c=a(33),d=a(4263),m=a(2777),p=a(6942),h=a.n(p);const u=["variant"],g=[{name:"",id:0,children:[1,2,3],parent:null},{name:"Fruits",children:[],id:1,parent:0,isBranch:!0},{name:"Drinks",children:[4,5],id:2,parent:0,isBranch:!0},{name:"Vegetables",children:[],id:3,parent:0,isBranch:!0},{name:"Pine colada",children:[],id:4,parent:2},{name:"Water",children:[],id:5,parent:2}];const v=e=>{let{isOpen:n,className:a}=e;const t="arrow",l=h()(t,{[t+"--closed"]:!n},{[t+"--open"]:n},a);return r.createElement(c.c_e,{className:l})},x=e=>{let{variant:n}=e,a=(0,l.A)(e,u);switch(n){case"all":return r.createElement(o.Hcz,a);case"none":return r.createElement(o.$qz,a);case"some":return r.createElement(o.tx_,a);default:return null}},b=function(){const e=(0,r.useRef)(null),[n,a]=(0,r.useState)(g),[l,i]=(0,r.useState)([]);return r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement("div",{className:"visually-hidden",ref:e,role:"alert","aria-live":"polite"}),r.createElement("div",{className:"checkbox"},r.createElement(m.Ay,{data:n,"aria-label":"Checkbox tree",onLoadData:async n=>{const t=0===n.element.children.length,r=l.find((e=>e.id===n.element.id));if(await(e=>{let{element:n}=e;return new Promise((e=>{n.children.length>0?e():setTimeout((()=>{a((e=>{return a=e,t=n.id,l=[{name:"Child Node "+e.length,children:[],id:e.length,parent:n.id,isBranch:!0},{name:"Another child Node",children:[],id:e.length+1,parent:n.id}],a.map((e=>(e.id===t&&(e.children=l.map((e=>e.id))),e))).concat(l);var a,t,l})),e()}),1e3)}))})(n),t&&!r){const a=e.current;i([...l,n.element]),a&&(a.innerHTML=n.element.name+" loaded"),setTimeout((()=>{a&&(a.innerHTML="")}),5e3)}},multiSelect:!0,propagateSelect:!0,togglableSelect:!0,propagateSelectUpwards:!0,nodeRenderer:e=>{let{element:n,isBranch:a,isExpanded:l,isSelected:i,isHalfSelected:s,getNodeProps:o,level:c,handleSelect:m,handleExpand:p}=e;return r.createElement("div",(0,t.A)({},o({onClick:p}),{style:{marginLeft:40*(c-1)}}),a&&((e,n)=>e&&0===n.children.length?r.createElement(r.Fragment,null,r.createElement("span",{role:"alert","aria-live":"assertive",className:"visually-hidden"},"loading ",n.name),r.createElement(d.rXk,{"aria-hidden":!0,className:"loading-icon"})):r.createElement(v,{isOpen:e}))(l,n),r.createElement(x,{className:"checkbox-icon",onClick:e=>{m(e),e.stopPropagation()},variant:s?"some":i?"all":"none"}),r.createElement("span",{className:"name"},n.name))}}))))},f='import React, { useRef, useState } from "react";\nimport { FaSquare, FaCheckSquare, FaMinusSquare } from "react-icons/fa";\nimport { IoMdArrowDropright } from "react-icons/io";\nimport { AiOutlineLoading } from "react-icons/ai";\nimport TreeView from "react-accessible-treeview";\nimport cx from "classnames";\nimport "./styles.css";\n\nconst initialData = [\n  {\n    name: "",\n    id: 0,\n    children: [1, 2, 3],\n    parent: null,\n  },\n  {\n    name: "Fruits",\n    children: [],\n    id: 1,\n    parent: 0,\n    isBranch: true,\n  },\n  {\n    name: "Drinks",\n    children: [4, 5],\n    id: 2,\n    parent: 0,\n    isBranch: true,\n  },\n  {\n    name: "Vegetables",\n    children: [],\n    id: 3,\n    parent: 0,\n    isBranch: true,\n  },\n  {\n    name: "Pine colada",\n    children: [],\n    id: 4,\n    parent: 2,\n  },\n  {\n    name: "Water",\n    children: [],\n    id: 5,\n    parent: 2,\n  },\n];\n\nfunction MultiSelectCheckboxAsync() {\n  const loadedAlertElement = useRef(null);\n  const [data, setData] = useState(initialData);\n  const [nodesAlreadyLoaded, setNodesAlreadyLoaded] = useState([]);\n\n  const updateTreeData = (list, id, children) => {\n    const data = list.map((node) => {\n      if (node.id === id) {\n        node.children = children.map((el) => {\n          return el.id;\n        });\n      }\n      return node;\n    });\n    return data.concat(children);\n  };\n\n  const onLoadData = ({ element }) => {\n    return new Promise((resolve) => {\n      if (element.children.length > 0) {\n        resolve();\n        return;\n      }\n      setTimeout(() => {\n        setData((value) =>\n          updateTreeData(value, element.id, [\n            {\n              name: `Child Node ${value.length}`,\n              children: [],\n              id: value.length,\n              parent: element.id,\n              isBranch: true,\n            },\n            {\n              name: "Another child Node",\n              children: [],\n              id: value.length + 1,\n              parent: element.id,\n            },\n          ])\n        );\n        resolve();\n      }, 1000);\n    });\n  };\n\n  const wrappedOnLoadData = async (props) => {\n    const nodeHasNoChildData = props.element.children.length === 0;\n    const nodeHasAlreadyBeenLoaded = nodesAlreadyLoaded.find(\n      (e) => e.id === props.element.id\n    );\n\n    await onLoadData(props);\n\n    if (nodeHasNoChildData && !nodeHasAlreadyBeenLoaded) {\n      const el = loadedAlertElement.current;\n      setNodesAlreadyLoaded([...nodesAlreadyLoaded, props.element]);\n      el && (el.innerHTML = `${props.element.name} loaded`);\n\n      // Clearing aria-live region so loaded node alerts no longer appear in DOM\n      setTimeout(() => {\n        el && (el.innerHTML = "");\n      }, 5000);\n    }\n  };\n\n  return (\n    <>\n      <div>\n        <div\n          className="visually-hidden"\n          ref={loadedAlertElement}\n          role="alert"\n          aria-live="polite"\n        ></div>\n        <div className="checkbox">\n          <TreeView\n            data={data}\n            aria-label="Checkbox tree"\n            onLoadData={wrappedOnLoadData}\n            multiSelect\n            propagateSelect\n            togglableSelect\n            propagateSelectUpwards\n            nodeRenderer={({\n              element,\n              isBranch,\n              isExpanded,\n              isSelected,\n              isHalfSelected,\n              getNodeProps,\n              level,\n              handleSelect,\n              handleExpand,\n            }) => {\n              const branchNode = (isExpanded, element) => {\n                return isExpanded && element.children.length === 0 ? (\n                  <>\n                    <span\n                      role="alert"\n                      aria-live="assertive"\n                      className="visually-hidden"\n                    >\n                      loading {element.name}\n                    </span>\n                    <AiOutlineLoading\n                      aria-hidden={true}\n                      className="loading-icon"\n                    />\n                  </>\n                ) : (\n                  <ArrowIcon isOpen={isExpanded} />\n                );\n              };\n              return (\n                <div\n                  {...getNodeProps({ onClick: handleExpand })}\n                  style={{ marginLeft: 40 * (level - 1) }}\n                >\n                  {isBranch && branchNode(isExpanded, element)}\n                  <CheckBoxIcon\n                    className="checkbox-icon"\n                    onClick={(e) => {\n                      handleSelect(e);\n                      e.stopPropagation();\n                    }}\n                    variant={\n                      isHalfSelected ? "some" : isSelected ? "all" : "none"\n                    }\n                  />\n                  <span className="name">{element.name}</span>\n                </div>\n              );\n            }}\n          />\n        </div>\n      </div>\n    </>\n  );\n}\n\nconst ArrowIcon = ({ isOpen, className }) => {\n  const baseClass = "arrow";\n  const classes = cx(\n    baseClass,\n    { [`${baseClass}--closed`]: !isOpen },\n    { [`${baseClass}--open`]: isOpen },\n    className\n  );\n  return <IoMdArrowDropright className={classes} />;\n};\n\nconst CheckBoxIcon = ({ variant, ...rest }) => {\n  switch (variant) {\n    case "all":\n      return <FaCheckSquare {...rest} />;\n    case "none":\n      return <FaSquare {...rest} />;\n    case "some":\n      return <FaMinusSquare {...rest} />;\n    default:\n      return null;\n  }\n};\n\nexport default MultiSelectCheckboxAsync;\n',y="@keyframes spinner {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n.loading-icon {\n  animation: spinner 1.5s linear infinite;\n  margin-left: 5px;\n}\n\n.visually-hidden {\n  position: absolute;\n  clip-path: circle(0);\n  border: 0;\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  width: 1px;\n  white-space: nowrap;\n}\n",k=["components"],S={title:"Asynchronous loading"},w=void 0,A={unversionedId:"examples-MultiSelectCheckboxAsync",id:"examples-MultiSelectCheckboxAsync",title:"Asynchronous loading",description:"This example demonstrates how to create a checkbox tree with asynchronous loading",source:"@site/docs/examples-MultiSelectCheckboxAsync.mdx",sourceDirName:".",slug:"/examples-MultiSelectCheckboxAsync",permalink:"/react-accessible-treeview/docs/examples-MultiSelectCheckboxAsync",draft:!1,tags:[],version:"current",frontMatter:{title:"Asynchronous loading"},sidebar:"docs",previous:{title:"Checkbox",permalink:"/react-accessible-treeview/docs/examples-MultiSelectCheckbox"},next:{title:"Asynchronous loading with Controlled selection",permalink:"/react-accessible-treeview/docs/examples-MultiSelectCheckboxAsyncControlled"}},C={},N=[],E={toc:N},D="wrapper";function L(e){let{components:n}=e,a=(0,l.A)(e,k);return(0,i.yg)(D,(0,t.A)({},E,a,{components:n,mdxType:"MDXLayout"}),(0,i.yg)("p",null,"This example demonstrates how to create a checkbox tree with asynchronous loading"),(0,i.yg)(s.A,{component:b,js:f,css:y,mdxType:"CodeTabs"}))}L.isMDXComponent=!0}}]);